<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="../../../content/akko.ico" type="image/x-icon">
  <title>Fazendo Desafios</title>
  <link rel="stylesheet" href="../../../content/style-source/style-js-all.css" media="all">
  <link rel="stylesheet" href="../../../content/style-source/style-js-desktop.css" media="screen and (min-width: 600px)">

</head>
<body class="scroll">



  <header>
      <div>
        <div id="container-back">
            <a href="../pag-exercise.html"><img src="../../../content/back-button-icon.png" alt=""></a>
        </div>

        <h1>Preço Mudou</h1>
      </div>
  </header>



  <main>

      <div>
        <input id="ver" class="medium button" type="button" value="Verificar">

        <section id="res"><h3>Clique no botão acima para iniciar</h3></section>
      </div>

  </main>



  <footer>
      <div>
        <a href="https://github.com/gustavoguanabara/javascript/tree/master/desafios/d012" target="_blank"><img src="../../../content/icon_link-github.png" alt="github icon"></a>
      </div>
      <div>
        <a href="dejs_11.html"><img src="../../../content/back-button-icon.png" alt="exercício anterior"></a>
        <p>DES 12</p>
        <a href="dejs_13.html"><img src="../../../content/next-button-icon.png" alt="próximo exercício"></a>
      </div>
  </footer>


  <script>

    ver = document.querySelector("input#ver")
    ver.addEventListener("click", verificar)

    function verificar() {

        prodNom = prompt("Qual é o nome do produto que você está comprando?")
        if (prodNom == "") {
          alert("O nome do produto é inválido.\nO nome do produto passa a ser Vento.")
          prodNom = "Vento"
        }

        precAnt = Number(prompt(`Qual era o preço anterior do produto ${prodNom}?`))
        if (precAnt <= 0) {
          alert("O preço escolhido é inválido.\nO valor de preço passa a ser R$ 43,00.")
          precAnt = 43
        }

        precAtu = Number(prompt(`Qual é o preço atual do produto ${prodNom}?`))
        if (precAtu <= 0) {
          alert("O preço escolhido é inválido.\nO valor de preço passa a ser R$ 34,00.")
          precAtu = 34
        }


        precSub = precAtu - precAnt
        precDec = precAtu - precAnt
        precSub = precSub.toLocaleString("pt-br", {style: "currency", currency: "BRL"})
        precDec = precDec.toLocaleString("pt-br", {style: "currency", currency: "BRL"})
        precAntReal = precAnt.toLocaleString("pt-br", {style: "currency", currency: "BRL"})
        precAtuReal = precAtu.toLocaleString("pt-br", {style: "currency", currency: "BRL"})


        res = document.querySelector("section#res")
        res.innerHTML = `<h3>Analisando os valores informados.</h3><br>`
        res.innerHTML += `<p>O produto ${prodNom} custava ${precAntReal} e agora custa ${precAtuReal}.</p>`


        if (precAnt > precAtu) {
          res.innerHTML += `<p>Hoje o produto ${prodNom} está mais barato.</p>`
          res.innerHTML += `<p>O preço desceu ${precDec} em relação ao preço anterior.</p>`
          res.innerHTML += `<p>Uma variação de ${(((precAtu-precAnt)/precAnt)*100).toFixed(2)}% pra baixo.</p>`
        } else if (precAtu > precAnt) {
          res.innerHTML += `<p>Hoje o produto ${prodNom} está mais caro.</p>`
          res.innerHTML += `<p>O preço subiu ${precSub} em relação ao preço anterior.</p>`
          res.innerHTML += `<p>Uma variação de ${(((precAtu-precAnt)/precAnt)*100).toFixed(2)}% pra cima.</p>`
        } else {
          res.innerHTML += `<p>O preço não mudou.</p>`
        }
    }
  </script>



</body>
</html>